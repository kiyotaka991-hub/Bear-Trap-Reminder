name: Bear Trap Reminder

on:
  workflow_dispatch:   # 👈 manual trigger for testing
  schedule:
    # Odd days → 1, 3, 5, ... (since today is even, we want odd start tomorrow)
    # First reminder: 05:25 UTC → Bear Trap 2
    - cron: "25 5 1-31/2 * *"
    # Second reminder: 14:25 UTC → Bear Trap 1
    - cron: "25 14 1-31/2 * *"

jobs:
  send-reminder:
    runs-on: ubuntu-latest
    steps:
      - name: Send Bear Trap 2 Reminder (05:25 UTC)
        if: ${{ github.event.schedule == '25 5 1-31/2 * *' || github.event.schedule == '25 5 2-30/2 * *' }}
        run: |
          curl -H "Content-Type: application/json" \
          -d '{"content":"⚠️ Bear Trap 2 Reminder! @everyone"}' \
          ${{ secrets.DISCORD_WEBHOOK }}

      - name: Send Bear Trap 1 Reminder (14:25 UTC)
        if: ${{ github.event.schedule == '25 14 1-31/2 * *' || github.event.schedule == '25 14 2-30/2 * *' }}
        run: |
          curl -H "Content-Type: application/json" \
          -d '{"content":"⚠️ Bear Trap 1 Reminder! @everyone"}' \
          ${{ secrets.DISCORD_WEBHOOK }}
